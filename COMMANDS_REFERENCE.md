# Koidice 命令速查表

本文档提供 Koidice 所有命令的快速参考。

---

## 🎲 基础掷骰

### `.r` / `.roll` - 掷骰子
```
koidice.roll 1d100          # 掷一个100面骰
koid.r 3d6+5                # 掷三个6面骰并加5
koid.r 2d20 -r 攻击         # 掷骰并附带原因
koid.r 1d100 -d             # 暗骰（隐藏结果）
```

**选项**:
- `-r <原因>` - 添加掷骰原因
- `-d` - 暗骰（不显示结果）

---

## 🐙 COC 规则

### `.rc` - 技能检定
```
koidice.rc 50               # 技能值50的检定
koid.rc 60 -b 1             # 带1个奖励骰
koid.rc 40 -p 2             # 带2个惩罚骰
koid.rc 70 -r 侦查          # 带原因的检定
```

**选项**:
- `-b <数量>` - 奖励骰
- `-p <数量>` - 惩罚骰
- `-r <原因>` - 检定原因

**成功等级**:
- 大失败 (≤5 且失败)
- 失败 (>技能值)
- 成功 (≤技能值)
- 困难成功 (≤技能值/2)
- 极难成功 (≤技能值/5)
- 大成功 (=1 或 ≤5)

### `.sc` - 理智检定
```
koidice.sc 1/1d6            # 成功损失1点，失败损失1d6点
koid.sc 0/1d10              # 成功不损失，失败损失1d10点
```

**格式**: `.sc <成功时损失>/<失败时损失>`

### `.en` - 成长检定
```
koidice.en 侦查             # 对"侦查"技能进行成长检定
```

**说明**: 检定1d100，若大于当前技能值则成功，技能值+1d10

### `.coc` - COC7人物作成
```
koidice.coc                 # 生成COC7人物
koid.coc 3                  # 生成3个COC7人物
```

### `.coc6` - COC6人物作成
```
koidice.coc coc6            # 生成COC6人物
```

### `.ti` - 临时疯狂症状
```
koidice.ti                  # 随机生成临时疯狂症状
```

**症状类型** (1d10):
1. 健忘症
2. 假性残疾
3. 暴力倾向
4. 偏执
5. 依赖他人
6. 昏厥
7. 逃避/癔症
8. 恐慌
9. 恐惧症 (1d100 详细)
10. 躁狂症 (1d100 详细)

### `.li` - 永久/不定疯狂症状
```
koidice.li                  # 随机生成永久疯狂症状
```

**症状类型** (1d10): 与临时疯狂类似，但持续时间更长

### `.setcoc` - 设置COC房规
```
koidice.setcoc 0            # 规则0：大失败为 ≤5 且失败
koid.setcoc 1               # 规则1：大失败为 =100 或连续两个0
```

---

## 🐉 DND 规则

### `.dnd` - DND人物作成
```
koidice.dnd                 # 生成1个DND人物
koid.dnd 3                  # 生成3个DND人物
```

**生成属性**: 力量、敏捷、体质、智力、感知、魅力 (各4d6去最小)

---

## ⚔️ 先攻系统

### `.init` - 先攻列表管理
```
koidice.init 玩家A 15       # 添加玩家A，先攻值15
koid.init 敌人 12           # 添加敌人，先攻值12
koidice.init.list           # 显示先攻列表
koid.init.next              # 下一个回合
koidice.init.del 玩家A      # 删除玩家A
koid.init.clr               # 清空先攻列表
```

**子命令**:
- `init <名称> <先攻值>` - 添加先攻
- `init.list` / `init.show` - 显示列表
- `init.next` / `init.n` - 下一回合
- `init.del <名称>` / `init.rm` - 删除条目
- `init.clr` / `init.clear` - 清空列表

### `.ri` - 快速先攻检定
```
koidice.ri                  # 掷1d20作为先攻
koid.ri +2                  # 掷1d20+2作为先攻
koid.ri -1                  # 掷1d20-1作为先攻
```

---

## 📋 角色卡系统

### `.pc` - 角色卡管理
```
koidice.pc.new 调查员       # 创建名为"调查员"的角色卡
koid.pc.set 调查员 力量 60  # 设置调查员的力量为60
koid.pc.get 调查员 力量     # 查询调查员的力量
koidice.pc.show 调查员      # 查看调查员的完整信息
koid.pc.list                # 列出所有角色卡
koid.pc.del 调查员          # 删除调查员角色卡
```

### `.st` - 当前角色属性
```
koidice.st.set 力量 60      # 设置当前角色的力量为60
koid.st.show                # 查看当前角色的所有属性
koid.st.clr                 # 清空当前角色的所有属性
```

**说明**: `.st` 使用 `user_<用户ID>` 作为角色名

---

## 🃏 牌堆系统

### `.draw` - 抽卡
```
koidice.draw 塔罗牌         # 从塔罗牌堆抽1张
koid.draw 扑克牌 3          # 从扑克牌堆抽3张
koidice.draw.list           # 列出所有可用牌堆
```

**内置牌堆**:
- 数字 (0-9)
- 字母 (A-Z)
- 天干 (甲-癸)
- 地支 (子-亥)
- 塔罗牌
- 扑克牌
- 姓名
- 等等

---

## 🎭 WOD 骰池

### `.w` - WOD骰池（简略）
```
koidice.w 5d10              # 掷5个10面骰（只显示成功数）
```

### `.ww` - WOD骰池（详细）
```
koidice.ww 5d10             # 掷5个10面骰（显示详细结果）
```

**规则**: ≥8为成功，1为大失败

---

## 📖 规则速查

### `.rule` - 查询规则
```
koidice.rule 先攻           # 查询先攻规则
koid.rule COC 理智          # 查询COC系统的理智规则
koidice.rule                # 显示帮助信息
```

**支持的系统**:
- COC (克苏鲁的呼唤)
- DND (龙与地下城)
- 等等

---

## 👁️ 旁观模式

### `.ob` - 旁观
```
koidice.ob enter            # 进入旁观模式
koid.ob exit                # 退出旁观模式
koidice.ob list             # 列出当前频道的旁观者
koid.ob clear               # 清空旁观列表
```

**说明**: 旁观者会收到当前频道的掷骰结果通知

---

## ⚙️ 设置系统

### `.set` - 设置默认骰面
```
koidice.set 100             # 设置默认骰面为100
koid.set                    # 查看当前设置
```

### `.nn` - 设置昵称
```
koidice.nn 探索者           # 设置昵称为"探索者"
koid.nn                     # 查看当前昵称
```

---

## 💡 使用技巧

### 命令别名
- `koidice` 可以简写为 `koid`
- `.r` 是 `.roll` 的简写
- `.rc` 是 `.check` 的简写

### 批量操作
```
koid.coc 5                  # 一次生成5个COC人物
koid.dnd 3                  # 一次生成3个DND人物
koid.draw 塔罗牌 5          # 一次抽5张塔罗牌
```

### 组合使用
```
# 创建角色后设置属性
koid.pc.new 调查员
koid.pc.set 调查员 力量 70
koid.pc.set 调查员 敏捷 60

# 使用当前角色快速设置
koid.st.set 力量 70
koid.st.set 敏捷 60
koid.en 侦查                # 成长检定会自动使用当前角色
```

---

## 📌 注意事项

1. **命令前缀**: 所有命令都需要 `koidice.` 或 `koid.` 前缀
2. **参数**: 大部分参数都是必需的，可选参数会用 `[参数]` 标记
3. **选项**: 使用 `-` 开头，如 `-r`, `-b`, `-p`, `-d`
4. **持久化**: 角色卡和先攻列表会自动保存
5. **频道隔离**: 先攻列表、旁观列表按频道隔离

---

## 🆘 获取帮助

```
koidice --help              # 查看主命令帮助
koid.roll --help            # 查看子命令帮助
koidice.rule                # 查看规则速查帮助
```

---

**文档版本**: 1.0.0-beta.1  
**最后更新**: 2025-11-04
